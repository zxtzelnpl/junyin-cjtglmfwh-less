<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>积分记录</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="/mobile/libs/normalize-css/normalize.css">
    <link rel="stylesheet" href="/mobile/libs/jquery-toast-plugin/dist/jquery.toast.min.css">
    <link rel="stylesheet" href="/mobile/css/userCenter.css">
</head>
<body>
<form>
    <div class="container userCenterPointsRecord">
        <div class="tabs" id="tabs">
            <div class="tab on">积分记录</div>
            <div class="tab">积分规则</div>
        </div>

        <div class="contents">
            <div class="content on">
                <div class="pointsOneLine">
                    <span>425</span>
                    <span>积分</span>
                </div>
                <div class="blank-h-10"></div>
                <ul class="pointsRecord" id="pointsRecord" data-hasmore="1">
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>兑换一周服务</span>
                                <span>-300</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                    <li>
                        <div>
                            <p>
                                <span>签到成功</span>
                                <span>+5</span>
                            </p>
                            <p>2018-02-22</p>
                        </div>
                    </li>
                </ul> <!--hasMore表示有更多的数据可以加载-->
            </div>
            <div class="content">
                <div class="pointsRegulation">
                    <p>
                        每天连续签到可以依次获得1、2、3、4、5。从第六天开始都将获得5积分中途漏签，则从1个积分重新开始领取。
                    </p>
                </div>
            </div>
        </div>

    </div>
</form>
</body>
<script src="/mobile/libs/jquery/dist/jquery.min.js"></script>
<script src="/mobile/libs/jquery-toast-plugin/dist/jquery.toast.min.js"></script>
<script src="/mobile/javascript/loadMore.js"></script>
<script>
    $(function(){
        /**
         * Tab切换
         */
        $('#tabs').click(function (e) {
            var tab = e.target;
            if (tab.className === 'tab') {
                var index = $(tab).index();
                $(tab).addClass('on').siblings().removeClass('on');
                $('.content').eq(index).addClass('on').siblings().removeClass('on')
            }
        });


        /**
         * 所有的负值的颜色边成深红色
         */
        function colorInit(){
            $('#pointsRecord').find('p>span:last-child').each(function(index,span){
                var text = $(span).text();
                if(text.indexOf('-')>-1){
                    $(span).addClass('darkRed');
                }
            });
        }
        colorInit();



        /**
         * 上拉加载更多
         */
        $('#pointsRecord').loadMore({
            loadFunction:function(loadEnd){
                /**这边进行ajax**/
                // $.ajax({
                //     url:'',
                //     dataType:'json',
                //     success:function(data){
                /***无论ajax成功或者失败，都需要执行一次loadEnd,否则不会进行第二次ajax的加载*/
                //         loadEnd()
                //     },
                //     fail:function(err){
                /***无论ajax成功或者失败，都需要执行一次loadEnd,否则不会进行第二次ajax的加载*/
                //         loadEnd()
                //     }
                // })
                /*setTimeout(function(){
                    console.log('我去加载数据');
                    loadEnd();
                },1000)*/
            }
        })
    })
</script>
</html>